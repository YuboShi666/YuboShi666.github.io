<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Yubo's homepage </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    
    <header>
        <h1>hello everyone, this is yubo</h1>
    </header>

    <nav>
        <h2>目录</h2>
        <ul id="toc"></ul>
    </nav>
    
    <main>
        <section id = "section1">
            <h2>about me </h2>
            <p>I am a forth year PhD student</p>
        </section>
        <section id = "section2">
            <h2>education background</h2>
            <ul>
                <li>2021 - on: PhD, nankai university</li>
                <li>2017 - 2021: BsC, nankai university</li>
            </ul>
        </section>
        <section id = "section3">
            <h2>publication</h2>
            <ol>
                <li>AAA</li>
                <li>BBB</li>
            </ol>
        </section>
        <section id = "section4">
            <h2>contact</h2>
            <p>email:yubobalabala</p>
        </section>
    </main>

<script>
        document.addEventListener("DOMContentLoaded", () => {
            // 获取目录容器
            const toc = document.getElementById("toc");

            // 获取所有标题
            const sections = document.querySelectorAll("section");

            // 动态生成目录项
            sections.forEach((section, index) => {
                const id = section.id || `section${index + 1}`;
                const title = section.querySelector("h2").innerText;

                // 创建目录项
                const li = document.createElement("li");
                li.innerHTML = `<a href="#${id}">${title}</a>`;
                toc.appendChild(li);
            });

            // 高亮当前章节
            const links = document.querySelectorAll("nav ul li a");
            window.addEventListener("scroll", () => {
                let currentSection = null;
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100; // 提前高亮
                    if (window.scrollY >= sectionTop) {
                        currentSection = section.id;
                    }
                });

                links.forEach(link => {
                    link.parentElement.classList.remove("active");
                    if (link.getAttribute("href").substring(1) === currentSection) {
                        link.parentElement.classList.add("active");
                    }
                });
            });
        });
    </script>
    
    <footer>
        <p>it is me</p>
    </footer>
</body>
</html>
